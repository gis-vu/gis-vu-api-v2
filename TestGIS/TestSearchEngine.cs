using System;
using System.Linq;
using DTOs;
using LoadGIS;
using Models;
using Newtonsoft.Json;
using SearchGIS;
using Xunit;

namespace TestGIS
{
    public class TestSearchEngine
    {
        [Fact]
        public void FindRouteBetweenTwoCells()
        {
            //Assert.True(true);

            var searchEngine = new SearchEngine(new Loader(
                @"C:\Users\daini\Desktop\GIS\Projektas\Projektas.V2\API2\GIS.VU.API\Data\grid.txt",
                @"C:\Users\daini\Desktop\GIS\Projektas\Projektas.V2\API2\GIS.VU.API\Data\"));

            var route = searchEngine.FindRoute(new RouteSearchRequestDTO()
            {
                Start = new CoordinateDTO()
                {
                    Lng = 25.366447189290653,
                    Lat = 55.997527852111688
                },
                End = new CoordinateDTO()
                {
                    Lng = 25.424663052125652,
                    Lat = 56.0463116144837
                },
                Points = Array.Empty<CoordinateDTO>()
            });


            //var first = JsonConvert.SerializeObject(route);
            //var second = JsonConvert.DeserializeObject(
            //    "{\"routes\":[{\"info\":{\"length\":0.0},\"data\":{\"type\":\"LineString\",\"coordinates\":[[22.874644913496294,54.847397081289721],[22.87409600000003,54.8488137],[22.871065400000006,54.85663390000002],[22.870045399999992,54.859321299999984],[22.870045399999992,54.859321299999984],[22.868767799999993,54.862687200000018],[22.868767799999993,54.862687200000018],[22.886008100000037,54.868355200000025],[22.886889100000019,54.868629800000022],[22.88829330000004,54.868909699999996],[22.890339999999977,54.8693005],[22.890908999999994,54.869469500000065],[22.891450500000033,54.869691400000029],[22.892031000000028,54.869973800000039],[22.892031000000028,54.869973800000039],[22.892374099999998,54.869850899999989],[22.894714900000064,54.869465100000021],[22.895490299999977,54.869322400000044],[22.895772200000053,54.86926059999999],[22.89597539999998,54.869171000000073],[22.896159800000063,54.869050900000047],[22.896211200000032,54.868984599999969],[22.896211200000032,54.868984599999969],[22.896281399999975,54.868892499999973],[22.896281399999975,54.868892499999973],[22.8963193,54.86884450000003],[22.896335899999954,54.868823599999985],[22.896689199999969,54.868163299999985],[22.897417700000027,54.866701299999974],[22.898528700000032,54.863468300000008],[22.898528700000032,54.863468300000008],[22.904533999999963,54.864474400000006],[22.906373999999992,54.86469680000004],[22.906534899999954,54.864616500000032],[22.906770999999971,54.864104],[22.906953399999949,54.864029899999984],[22.911458100000008,54.86468319999998],[22.9133432,54.865034800000025],[22.9133432,54.865034800000025],[22.913836200000038,54.865169599999987],[22.917496400000012,54.86578660000005],[22.918260499999992,54.865878800000061],[22.919653200000045,54.866155400000004],[22.9221303,54.866602300000054],[22.922339799999992,54.866559699999975],[22.923917299999982,54.866112900000047],[22.924267500000006,54.865949600000029],[22.924267500000006,54.865949600000029],[22.924021399999976,54.865746099999981],[22.923895300000005,54.865699899999981],[22.923685000000031,54.8657256],[22.923369500000035,54.865768900000027],[22.923291000000017,54.865302499999977],[22.9230887,54.86456219999998],[22.923113900000029,54.864399400000011],[22.922584499999996,54.862715499999965],[22.922294800000021,54.861821599999978],[22.922294800000021,54.861821599999978],[22.922230600000034,54.861623600000044],[22.922188099999985,54.861053300000016],[22.922131499999992,54.8608985],[22.922117299999989,54.860018500000017],[22.922040999999986,54.859189900000054],[22.922018200000046,54.85894290000001],[22.922003599999975,54.858883200000051],[22.921706800000031,54.857671700000012],[22.921692600000032,54.8575087],[22.922683600000031,54.856384200000036],[22.922810999999996,54.856172300000004],[22.922856599999967,54.855716599999958],[22.9228354,54.855390499999992],[22.92226910000003,54.852892200000028],[22.922247299999974,54.852697900000045],[22.922334399999986,54.852431400000043],[22.923298199999984,54.850870299999983],[22.923683800000024,54.850239899999984],[22.923683800000024,54.850239899999984],[22.924561299999954,54.848805400000032],[22.927169400000025,54.84448],[22.927169400000025,54.84448],[22.928358199999973,54.84250819999999],[22.928686599999967,54.842142600000024],[22.928686599999967,54.842142600000024],[22.928888599999961,54.8419511],[22.930832800000012,54.840240799999982],[22.931280700000023,54.839853199999986],[22.931744700000049,54.83945],[22.93177189999998,54.839434300000043],[22.931864500000028,54.839380899999973],[22.931864500000028,54.839380899999973],[22.93139409999997,54.838793600000045],[22.930826099999994,54.837978700000036],[22.930826099999994,54.837978700000036],[22.93069729999997,54.838007999999988],[22.930278900000012,54.838108400000031],[22.929882000000028,54.838222699999974],[22.929467500000019,54.838280700000006],[22.929467500000019,54.838280700000006],[22.928719200000003,54.838364100000035],[22.928545478632355,54.838382264380925]]}}]}");

            //var secondAsText = JsonConvert.SerializeObject(second);

            //Assert.True(secondAsText.ToLower() == first.ToLower());
        }

        [Fact]
        public void FindRouteOnSameFeature()
        {
            //Assert.True(true);

            var searchEngine = new SearchEngine(new Loader(
                @"C:\Users\daini\Desktop\GIS\Projektas\Projektas.V2\API2\GIS.VU.API\Data\grid.txt",
                @"C:\Users\daini\Desktop\GIS\Projektas\Projektas.V2\API2\GIS.VU.API\Data\"));

            var route = searchEngine.FindRoute(new RouteSearchRequestDTO()
            {
                Start = new CoordinateDTO()
                {
                    Lng = 25.324857688107983,
                    Lat = 54.7171194829061
                },
                End = new CoordinateDTO()
                {
                    Lng = 25.325176757466124,
                    Lat = 54.716685610382342
                },
                Points = Array.Empty<CoordinateDTO>()
            });
        
            Assert.True(route.Routes[0].Data.Coordinates.Length == 4);

        }


        [Fact]
        public void OptimiseSearch()
        {

            var searchEngine = new SearchEngine(new Loader(
                @"C:\Users\daini\Desktop\GIS\Projektas\Projektas.V2\API2\GIS.VU.API\Data\grid.txt",
                @"C:\Users\daini\Desktop\GIS\Projektas\Projektas.V2\API2\GIS.VU.API\Data\"));

            var request = JsonConvert.DeserializeObject<RouteSearchRequestDTO>("{\"Start\":{\"Lng\":25.366537383084903,\"Lat\":55.997410369161514},\"End\":{\"Lng\":25.366559356026983,\"Lat\":55.997391937235562},\"Points\":[{\"Lng\":25.309065411704921,\"Lat\":55.947323629365229},{\"Lng\":25.315742916965206,\"Lat\":55.930350142161728},{\"Lng\":25.385536211375751,\"Lat\":55.869338366456645}],\"SearchOptions\":{\"PropertyImportance\":[{\"Importance\":0.2,\"Property\":\"fclass\",\"Value\":\"bridleway\"},{\"Importance\":0.2,\"Property\":\"fclass\",\"Value\":\"cycleway\"},{\"Importance\":0.2,\"Property\":\"fclass\",\"Value\":\"path\"},{\"Importance\":0.2,\"Property\":\"fclass\",\"Value\":\"footway\"},{\"Importance\":0.2,\"Property\":\"fclass\",\"Value\":\"steps\"},{\"Importance\":1.0,\"Property\":\"fclass\",\"Value\":\"living_street\"},{\"Importance\":1.0,\"Property\":\"fclass\",\"Value\":\"pedestrian\"},{\"Importance\":1.0,\"Property\":\"fclass\",\"Value\":\"residential\"},{\"Importance\":1.0,\"Property\":\"fclass\",\"Value\":\"service\"},{\"Importance\":1.0,\"Property\":\"fclass\",\"Value\":\"tertiary\"},{\"Importance\":1.0,\"Property\":\"fclass\",\"Value\":\"track\"},{\"Importance\":1.0,\"Property\":\"fclass\",\"Value\":\"track_grade1\"},{\"Importance\":1.0,\"Property\":\"fclass\",\"Value\":\"track_grade2\"},{\"Importance\":1.0,\"Property\":\"fclass\",\"Value\":\"track_grade3\"},{\"Importance\":1.0,\"Property\":\"fclass\",\"Value\":\"track_grade4\"},{\"Importance\":1.0,\"Property\":\"fclass\",\"Value\":\"track_grade5\"},{\"Importance\":1.0,\"Property\":\"fclass\",\"Value\":\"unclassified\"},{\"Importance\":1.0,\"Property\":\"fclass\",\"Value\":\"motorway\"},{\"Importance\":1.0,\"Property\":\"fclass\",\"Value\":\"motorway_link\"},{\"Importance\":1.0,\"Property\":\"fclass\",\"Value\":\"primary\"},{\"Importance\":1.0,\"Property\":\"fclass\",\"Value\":\"primary_link\"},{\"Importance\":1.0,\"Property\":\"fclass\",\"Value\":\"secondary\"},{\"Importance\":1.0,\"Property\":\"fclass\",\"Value\":\"secondary_link\"},{\"Importance\":1.0,\"Property\":\"fclass\",\"Value\":\"trunk\"},{\"Importance\":1.0,\"Property\":\"fclass\",\"Value\":\"trunk_link\"}],\"PropertyValueImportance\":[{\"Importance\":1.0,\"Property\":\"distance_to_forrest\",\"Threshold\":0.0},{\"Importance\":1.0,\"Property\":\"distance_to_water\",\"Threshold\":50.0}],\"TrackOverlapImportance\":10.0}}");

            //var loader =

            //var loadedData = Loader.Load(
            //    new PointPosition
            //    {
            //        Latitude = request.Start.Lat,
            //        Longitude = request.Start.Lng
            //    },
            //    new PointPosition
            //    {
            //        Latitude = request.End.Lat,
            //        Longitude = request.End.Lng
            //    },
            //    request.Points.Select(x => new PointPosition
            //    {
            //        Latitude = x.Lat,
            //        Longitude = x.Lng
            //    }).ToArray()
            //);

            var route = searchEngine.FindRoute(request);

            var serializedRoute = JsonConvert.SerializeObject(route);
            var originalRoute = "{\"Routes\":[{\"Info\":{\"Length\":0.0},\"Data\":{\"Type\":\"LineString\",\"Coordinates\":[[25.366465146054828,55.997492579917591],[25.366040100001,55.997119100022267],[25.366040100001,55.997119100022267],[25.365805400001022,55.99718850002224],[25.365065000000953,55.997413900022252],[25.364334200000965,55.997658700022228],[25.363649700001009,55.997902400022248],[25.362869100000996,55.998159300022294],[25.362869100000996,55.998159300022294],[25.362668000000959,55.998230000022268],[25.362668000000959,55.998230000022268],[25.362582400000992,55.998258500022189],[25.36189490000103,55.998519000022263],[25.361061900001026,55.998809000022312],[25.361061900001026,55.998809000022312],[25.361006400000957,55.998783400022319],[25.361006400000957,55.998783400022319],[25.36088370000104,55.998829900022244],[25.36088370000104,55.998829900022244],[25.36047630000099,55.998646500022268],[25.36047630000099,55.998646500022268],[25.359627000000966,55.998298400022229],[25.359627000000966,55.998298400022229],[25.359534000000995,55.99\r\n8288800022223],[25.359348100000958,55.998186800022239],[25.359227600000946,55.998132800022312],[25.358693900000933,55.997921000022288],[25.358693900000933,55.997921000022288],[25.358091400001,55.99766110002227],[25.358091400001,55.99766110002227],[25.358188000001004,55.9976068000223],[25.358188000001004,55.9976068000223],[25.358098000001018,55.997569600022217],[25.358098000001018,55.997569600022217],[25.35834180000095,55.997204900022275],[25.358606900001035,55.996715800022315],[25.358658700000934,55.9966418000222],[25.358722000000959,55.996572400022259],[25.358775200000988,55.9964708000223],[25.358841400000962,55.996249400022251],[25.358944700000997,55.996024100022261],[25.359131800001013,55.9956595000223],[25.359212200001025,55.995488000022306],[25.359212200001025,55.995488000022306],[25.359260800000939,55.9953436000223],[25.359382600000981,55.99510260002225],[25.359382600000981,55.99510260002225],[25.359472700001,55.994914700022235],[25.359472700001,55.994914700022235],[25.359570000000947,55.994688700022252]\r\n,[25.359570000000947,55.994688700022252],[25.35970880000098,55.9943360000222],[25.35970880000098,55.9943360000222],[25.35984520000099,55.994031000022304],[25.35984520000099,55.994031000022304],[25.359923100000948,55.993856700022256],[25.359923100000948,55.993856700022256],[25.360066700001017,55.993550300022228],[25.360066700001017,55.993550300022228],[25.360122700000932,55.993416900022289],[25.360122700000932,55.993416900022289],[25.360266400001017,55.993103700022253],[25.360266400001017,55.993103700022253],[25.360385700000961,55.99285320002226],[25.360522000001026,55.992658400022229],[25.360602300001013,55.992523600022288],[25.360753300000987,55.992263500022226],[25.360858000001027,55.991961200022288],[25.360858000001027,55.991961200022288],[25.360884800001024,55.991848200022254],[25.360909100001,55.991688900022211],[25.360892100001031,55.991532300022222],[25.360892100001031,55.991532300022222],[25.360780100000969,55.991298100022213],[25.360780100000969,55.991298100022213],[25.360889100001032,55.9912799000222\r\n21],[25.360889100001032,55.991279900022221],[25.360787900001007,55.99108500002226],[25.360738400001,55.990981600022224],[25.359434200001022,55.988664600022275],[25.359434200001022,55.988664600022275],[25.358185400000977,55.9864458000223],[25.356852400001003,55.984406300022272],[25.353544500000929,55.9795091000223],[25.353360400000994,55.979196500022255],[25.353360400000994,55.979196500022255],[25.352831400001016,55.978406000022233],[25.352831400001016,55.978406000022233],[25.351580200000949,55.976499200022204],[25.35108340000097,55.97570310002223],[25.350939900001002,55.975489900022268],[25.350760500000973,55.97524700002225],[25.350399200000943,55.974827300022262],[25.35034440000101,55.974755400022232],[25.350305300000986,55.974674000022269],[25.350283300000914,55.974603900022231],[25.350277100000962,55.974525900022265],[25.350288000000972,55.97444790002217],[25.350306800001004,55.974381300022188],[25.350344400001,55.97428410002221],[25.350400600000942,55.974167800022229],[25.350400600000942,55.974167800022229\r\n],[25.351169000000919,55.972731600022229],[25.351524300000918,55.972034300022251],[25.352107800001,55.971007000022269],[25.352196400000928,55.970808400022243],[25.352236800001009,55.970690100022217],[25.352257700000948,55.970611800022226],[25.352269500000965,55.970538700022217],[25.352266900000995,55.970461400022245],[25.352257500000945,55.970350100022252],[25.35224020000091,55.9702485000222],[25.352210500000947,55.970178400022242],[25.352168200001,55.97011440002219],[25.352113400001,55.970057500022193],[25.352042900000946,55.970000500022195],[25.351958400000964,55.969948800022152],[25.351846100000998,55.969889900022189],[25.351350800000979,55.969676300022194],[25.350932800000926,55.969484400022218],[25.350852900000991,55.969437000022218],[25.350796500000946,55.96938890002221],[25.350746400000975,55.969331000022223],[25.350724500000936,55.969267000022256],[25.350724500000915,55.969221500022215],[25.350724500000915,55.969221500022215],[25.350622700000951,55.969206600022218],[25.350566400001007,55.96918640002224\r\n5],[25.350491200001017,55.969144400022238],[25.346203700000995,55.965732800022224],[25.346203700000995,55.965732800022224],[25.345978100000952,55.965553100022191],[25.345978100000952,55.965553100022191],[25.345660500000964,55.965279100022251],[25.34547330000095,55.965069800022256],[25.345353800001,55.964901700022224],[25.34526930000094,55.964739500022183],[25.343135700000992,55.951985800022186],[25.343135700000992,55.951985800022186],[25.342576200000948,55.9484277000222],[25.342576200000948,55.9484277000222],[25.342395800000943,55.947450000022151],[25.342395800000943,55.947450000022151],[25.335890700000935,55.947813800022125],[25.332229500000988,55.948229800022204],[25.331907600000903,55.948250800022159],[25.327393500000966,55.948190800022147],[25.324055900000943,55.948090500022204],[25.323233900000965,55.94811160002218],[25.322335600000894,55.948162600022236],[25.319560500000954,55.94827540002224],[25.319560500000954,55.94827540002224],[25.31942090000096,55.948242800022186],[25.319310200000942,55.948156000022\r\n2],[25.318939200000887,55.947795200022185],[25.318399000000991,55.947536400022166],[25.317852200000935,55.947153700022149],[25.317513800000913,55.9467637000222],[25.316993000000881,55.945976400022154],[25.316563500000896,55.945630200022229],[25.316189900000893,55.945506800022223],[25.316071900000878,55.945400200022206],[25.315948500000889,55.945377700022185],[25.315766300000902,55.945350800022183],[25.31513400000091,55.945242200022165],[25.31513400000091,55.945242200022165],[25.315766300000902,55.945350800022183],[25.315948500000889,55.945377700022185],[25.316071900000878,55.945400200022206],[25.316189900000893,55.945506800022223],[25.316563500000896,55.945630200022229],[25.316993000000881,55.945976400022154],[25.317513800000913,55.9467637000222],[25.317852200000935,55.947153700022149],[25.318399000000991,55.947536400022166],[25.318939200000887,55.947795200022185],[25.319310200000942,55.9481560000222],[25.31942090000096,55.948242800022186],[25.319560500000954,55.94827540002224],[25.319560500000954,55.948275400\r\n02224],[25.322335600000894,55.948162600022236],[25.323233900000965,55.94811160002218],[25.324055900000943,55.948090500022204],[25.327393500000966,55.948190800022147],[25.331907600000903,55.948250800022159],[25.332229500000988,55.948229800022204],[25.335890700000935,55.947813800022125],[25.342395800000943,55.947450000022151],[25.342395800000943,55.947450000022151],[25.34785450000096,55.947183100022187],[25.347956700000967,55.947171500022193],[25.348046800000997,55.947154600022238],[25.348213100000965,55.947072900022192],[25.348263400000945,55.94698100002217],[25.348263400000945,55.94698100002217],[25.348253800000982,55.946862900022154],[25.348082200000995,55.9463192000222],[25.34771260000096,55.945129600022177],[25.347081000001,55.9432339000222],[25.346944200000987,55.94285840002221],[25.346835400000941,55.942529300022159],[25.346835400000941,55.942529300022159],[25.34669470000091,55.941984200022169],[25.346678600000921,55.941858000022208],[25.346678600000949,55.941740800022174],[25.346689400000923,55.941611600\r\n022156],[25.346705500000951,55.941471900022137],[25.346759100000916,55.941230100022224],[25.346799300000946,55.941025800022167],[25.34680200000091,55.940935700022159],[25.34679400000098,55.940845500022213],[25.346775200000923,55.94074490002221],[25.346721500000907,55.940600700022195],[25.346651800000924,55.940476000022151],[25.346574000000984,55.940355800022175],[25.34380990000097,55.937236000022125],[25.341952900001004,55.935070800022139],[25.341697900000955,55.934784600022176],[25.341589200000993,55.934647800022105],[25.3415302000009,55.934553200022137],[25.341477900000957,55.934432300022173],[25.341445700000936,55.934328600022177],[25.341416200000996,55.934219700022169],[25.340957600000955,55.932376900022149],[25.340909300000984,55.932147000022169],[25.340891900000937,55.932031300022182],[25.340887800000992,55.9319239000222],[25.340902600000938,55.931808900022155],[25.340987100000923,55.931515900022141],[25.340987100000923,55.931515900022141],[25.340815400000942,55.931508400022146],[25.340678600000984,55.93\r\n147690002214],[25.340523100001,55.931414500022122],[25.340387600000966,55.931342400022118],[25.340181100000944,55.931216200022128],[25.339898100000966,55.931016300022151],[25.339092100000993,55.93044760002217],[25.339092100000993,55.93044760002217],[25.338561000000897,55.9300780000221],[25.33831830000101,55.929902900022114],[25.338060800000896,55.929699300022158],[25.337945500000963,55.929595700022205],[25.337866300000993,55.929515300022111],[25.337796600000985,55.929428900022153],[25.337738900000915,55.929349200022131],[25.337653100000939,55.92919900002213],[25.337549800000911,55.929018700022148],[25.335612400000933,55.925269800022186],[25.335162800000926,55.924613300022138],[25.334812600000937,55.92424950002215],[25.334347900000942,55.923850000022156],[25.33195400000092,55.922737000022146],[25.331533800000965,55.922490800022139],[25.331164500000963,55.92213760002214],[25.329237200000925,55.918865400022078],[25.328893400000904,55.918151900022117],[25.328809100000942,55.917875800022088],[25.328788300000923,55.\r\n917482800022192],[25.328890300000918,55.916143400022115],[25.328750200000975,55.915708100022172],[25.328489200000959,55.915337100022079],[25.328295900000949,55.9151600000221],[25.328010500000957,55.9149998000221],[25.326343800000917,55.914229200022092],[25.322579800000923,55.912524000022145],[25.322503851165713,55.912488555337418],[25.322503851165735,55.912488555337418],[25.3172358000009,55.910030000022118],[25.314863600000937,55.90893110002213],[25.314863600000937,55.90893110002213],[25.309447587731682,55.912626972737932],[25.309447587731672,55.912626972737932],[25.308883800000949,55.9130117000221],[25.308883800000949,55.9130117000221],[25.305893200000877,55.9149693000221],[25.305893200000877,55.9149693000221],[25.306100600000907,55.915641000022113],[25.306666200000873,55.917491100022154],[25.306862200000928,55.918094000022109],[25.307032200000872,55.918524900022163],[25.307176400000891,55.918812800022188],[25.307176400000891,55.918812800022188],[25.307032200000872,55.918524900022163],[25.306862200000928,55.9\r\n18094000022109],[25.306666200000873,55.917491100022154],[25.306100600000907,55.915641000022113],[25.305893200000877,55.9149693000221],[25.305893200000877,55.9149693000221],[25.308883800000949,55.9130117000221],[25.308883800000949,55.9130117000221],[25.308497937780384,55.912637040555445],[25.308497937780395,55.912637040555445],[25.305591000000923,55.909814500022136],[25.305364400000904,55.909712200022106],[25.305012100000891,55.909634600022073],[25.3041941000009,55.909592300022133],[25.303766200000904,55.909620500022136],[25.302872700000879,55.909729800022149],[25.302432200000926,55.909743900022143],[25.301815500000895,55.90970160002211],[25.301570100000948,55.909634600022052],[25.301456900000893,55.909567600022136],[25.301438000000928,55.909465300022106],[25.301500900000882,55.909348900022074],[25.301689700000885,55.909158500022116],[25.301721100000911,55.909070300022087],[25.301696000000877,55.908989200022162],[25.301331000000882,55.908530700022119],[25.300972400000852,55.907680700022141],[25.300712300000939,\r\n55.907005800022105],[25.300658600000929,55.906843500022063],[25.300599600000925,55.906747200022089],[25.300438700000949,55.906281200022079],[25.300283100000932,55.905806800022077],[25.300254900000915,55.905719600022053],[25.300233500000932,55.905633900022067],[25.300218700000954,55.905563200022087],[25.300204000000889,55.905506800022131],[25.300204000000889,55.905506800022131],[25.301663100000905,55.90536630002206],[25.301663100000905,55.90536630002206],[25.301233200000855,55.904180500022058],[25.3012466000009,55.904118100022075],[25.30131330000091,55.904068300022125],[25.301424500000895,55.904048300022062],[25.303053000000872,55.9037889000221],[25.30607470000086,55.903124800022134],[25.30607470000086,55.903124800022134],[25.3055146000009,55.9023346000221],[25.3055146000009,55.9023346000221],[25.305049000000938,55.901643200022114],[25.305023800000896,55.901523300022049],[25.305042700000939,55.901382200022077],[25.30507420000086,55.901290500022057],[25.30513080000096,55.9012199000221],[25.30513080000096,55.9012\r\n199000221],[25.305967700000913,55.900373300022096],[25.306320100000921,55.899953500022114],[25.306596900000915,55.899512500022105],[25.306792000000911,55.89902210002213],[25.306792000000911,55.89902210002213],[25.307326800000915,55.897494500022134],[25.307496700000957,55.8966957000221],[25.308113400000909,55.892419500022086],[25.308377700000911,55.891953800022087],[25.310315700000942,55.889709600022108],[25.312568600000937,55.887451100022119],[25.313293200000931,55.886744500022125],[25.313875700000885,55.886199200022091],[25.314043700000941,55.886073200022075],[25.314184400000933,55.885990700022077],[25.314371300000943,55.885904800022068],[25.314602400000883,55.8858235000221],[25.316433700000903,55.885223600022115],[25.316874700000895,55.885071600022059],[25.3172055000009,55.884947100022053],[25.317654900000953,55.8847693000221],[25.31792160000089,55.884652700022023],[25.31792160000089,55.884652700022023],[25.318060300000937,55.884583200022071],[25.318207300000907,55.88449370002202],[25.31829970000091,55.88441\r\n9500022119],[25.318408900000875,55.884314600022023],[25.318563200000991,55.884149700022064],[25.318693400000914,55.884000100022035],[25.318831000000912,55.883819900022033],[25.31892800000097,55.883673800022031],[25.319011600000948,55.8835231000221],[25.31909140000095,55.883352300022082],[25.31912660000097,55.883231200022024],[25.31916000000097,55.8831000000221],[25.319184900000902,55.882914000022041],[25.31921360000096,55.8826012000221],[25.319404200000907,55.880548600022095],[25.319614100000948,55.87935890002209],[25.319879100000932,55.877938100022028],[25.319881800000903,55.877734800022068],[25.31986490000093,55.877557100022024],[25.319806200000961,55.877311900022058],[25.319652300000932,55.87680170002205],[25.319547100000932,55.876530800021996],[25.319105600000885,55.875675100022008],[25.31858420000092,55.874738400022032],[25.318552800000916,55.874665900022066],[25.31854910000094,55.874611000022085],[25.318560200000881,55.874552900022074],[25.318577800000924,55.874505200022021],[25.318577800000924,55.874505\r\n200022021],[25.320754700000915,55.87494240002205],[25.320754700000915,55.87494240002205],[25.32459020000092,55.875712700021992],[25.32459020000092,55.875712700021992],[25.324899500000921,55.875775000022],[25.324899500000921,55.875775000022],[25.340813500000959,55.878986800022],[25.340813500000959,55.878986800022],[25.351101600000963,55.881054200022092],[25.351101600000963,55.881054200022092],[25.351370900000958,55.880537600022095],[25.351609100000953,55.880027900022107],[25.351686000000985,55.879955900022061],[25.351785000000927,55.879894300022066],[25.351894900000968,55.879853200022026],[25.35787470000103,55.878554200022094],[25.358090900000963,55.878488400022079],[25.360644700000954,55.877725900022057],[25.360827900000945,55.877656000022029],[25.360992800000975,55.877584000022026],[25.362249600000968,55.876924200022096],[25.362377800001,55.876837900022032],[25.362502400001016,55.876739300022045],[25.362583000000942,55.8766324000221],[25.362711300000967,55.876410400022],[25.363616300001,55.874644700021996],[2\r\n5.363715200001007,55.874424700022033],[25.363839800001003,55.874075300022056],[25.364136600000968,55.873109100022056],[25.364180600000953,55.87302490002201],[25.364239200001002,55.872955000022031],[25.364316100000995,55.872893300022056],[25.364418700000961,55.872835700022073],[25.364536000000975,55.872782300022],[25.369372600001011,55.871049300022079],[25.371863600000971,55.870181100021981],[25.372170500000966,55.870087600022011],[25.372366300001026,55.870032700022065],[25.376379700001007,55.869122700022025],[25.376699800001006,55.869076700022035],[25.377390400000966,55.868972800022036],[25.377617900001034,55.868925300021992],[25.37784540000105,55.868864400022026],[25.379340200001003,55.868334500022073],[25.381944100000947,55.867503000022012],[25.383953200001034,55.866766100022062],[25.384014929629345,55.866742050827426],[25.384014929629345,55.866742050827426],[25.384457536222367,55.866569616092669],[25.384457536222367,55.866569616092669],[25.384014929629345,55.866742050827426],[25.384014929629345,55.866742050\r\n827426],[25.383953200001034,55.866766100022062],[25.381944100000947,55.867503000022012],[25.379340200001003,55.868334500022073],[25.37784540000105,55.868864400022026],[25.377617900001034,55.868925300021992],[25.377390400000966,55.868972800022036],[25.376699800001006,55.869076700022035],[25.376379700001007,55.869122700022025],[25.372366300001026,55.870032700022065],[25.372170500000966,55.870087600022011],[25.371863600000971,55.870181100021981],[25.369372600001011,55.871049300022079],[25.364536000000975,55.872782300022],[25.364418700000961,55.872835700022073],[25.364316100000995,55.872893300022056],[25.364239200001002,55.872955000022031],[25.364180600000953,55.87302490002201],[25.364136600000968,55.873109100022056],[25.363839800001003,55.874075300022056],[25.363715200001007,55.874424700022033],[25.363616300001,55.874644700021996],[25.362711300000967,55.876410400022],[25.362583000000942,55.8766324000221],[25.362502400001016,55.876739300022045],[25.362377800001,55.876837900022032],[25.362249600000968,55.8769242000\r\n22096],[25.360992800000975,55.877584000022026],[25.360827900000945,55.877656000022029],[25.360644700000954,55.877725900022057],[25.358090900000963,55.878488400022079],[25.35787470000103,55.878554200022094],[25.351894900000968,55.879853200022026],[25.351785000000927,55.879894300022066],[25.351686000000985,55.879955900022061],[25.351609100000953,55.880027900022107],[25.351370900000958,55.880537600022095],[25.351101600000963,55.881054200022092],[25.351101600000963,55.881054200022092],[25.351009900000907,55.881168100022009],[25.351071900001003,55.881555300022079],[25.351052800001007,55.8817454000221],[25.351048900000958,55.881881700022078],[25.351108600001009,55.882138700022033],[25.351116600000939,55.882348800022086],[25.351280000000983,55.882639400022086],[25.351626700000953,55.883144500022041],[25.351710300000985,55.883305400022017],[25.351698400000942,55.883437300022095],[25.351618700000934,55.883564700022092],[25.35156290000095,55.883832900022071],[25.351499200000983,55.88393570002205],[25.351383600000926,55.\r\n884078700022052],[25.35124010000095,55.88439160002212],[25.351160400000932,55.884516800022077],[25.351076800000936,55.88461510002206],[25.35099360000099,55.884854000022074],[25.35099360000099,55.884854000022074],[25.351431200000977,55.884921900022135],[25.351782900000948,55.88497640002209],[25.351782900000948,55.88497640002209],[25.352133000000958,55.885030800022058],[25.35461160000094,55.885415400022076],[25.35461160000094,55.885415400022076],[25.353783300000991,55.886819600022065],[25.353616500000953,55.887104900022081],[25.353616500000953,55.887104900022081],[25.353536500000974,55.887251300022093],[25.353536500000974,55.887251300022093],[25.352806900000907,55.88860630002204],[25.352806900000907,55.88860630002204],[25.352632300000966,55.888919100022051],[25.352632300000966,55.888919100022051],[25.352535100000981,55.889093200022096],[25.352535100000981,55.889093200022096],[25.352231600000952,55.889637000022049],[25.352160700000933,55.889875700022053],[25.352157800000963,55.890205300022096],[25.352080300000946\r\n,55.890376300022119],[25.351953400001012,55.890584000022073],[25.351378000001024,55.891462400022093],[25.351378000001024,55.891462400022093],[25.353637900000923,55.892548200022048],[25.35567660000094,55.893519500022016],[25.35857420000098,55.894913900022132],[25.362639900000932,55.896825600022126],[25.362639900000932,55.896825600022126],[25.365925900000942,55.898394700022088],[25.365925900000942,55.898394700022088],[25.366671000000952,55.898783100022079],[25.367240600001036,55.899187500022038],[25.369388900000949,55.900715200022077],[25.370367300001,55.901335700022067],[25.371114600001011,55.901727000022127],[25.373606800000978,55.90297740002206],[25.37376370000101,55.903044300022131],[25.373942100001017,55.903087200022092],[25.374132500000961,55.903112000022119],[25.374336400001027,55.903121800022141],[25.374534900001038,55.9031157000221],[25.374764200000989,55.90309170002206],[25.374966700000947,55.90305330002208],[25.375174600001028,55.903008200022079],[25.376397500000959,55.902697300022119],[25.37639750000\r\n0959,55.902697300022119],[25.378054500001006,55.90228760002217],[25.378524000000962,55.90222170002211],[25.379335900001006,55.902210600022073],[25.379335900001006,55.902210600022073],[25.380115800001033,55.902236600022086],[25.380457300001058,55.902281800022088],[25.380457300001058,55.902281800022088],[25.382824200001053,55.902905800022133],[25.382824200001053,55.902905800022133],[25.383965800001004,55.903173600022093],[25.38456140000099,55.903284700022127],[25.38456140000099,55.903284700022127],[25.3853195419662,55.903424523511624],[25.38531954196619,55.903424523511639],[25.385957600001024,55.903542200022116],[25.386323400001029,55.903641500022076],[25.386323400001029,55.903641500022076],[25.386708200000985,55.903815500022112],[25.387060200001041,55.904010300022129],[25.387060200001041,55.904010300022129],[25.387239300001045,55.904145900022158],[25.387239300001045,55.904145900022158],[25.388701200001048,55.905079200022129],[25.388774800000977,55.905140400022105],[25.388828100001028,55.905200300022088],[25.388\r\n855000001044,55.905262800022108],[25.388855000001044,55.905262800022108],[25.388976600000994,55.905283400022121],[25.389102100001,55.905330300022079],[25.389928000001017,55.905892100022143],[25.389928000001017,55.905892100022143],[25.390047300001012,55.906000000022118],[25.391594000001025,55.907134600022104],[25.391594000001025,55.907134600022104],[25.391716700001048,55.907437000022064],[25.391689100000992,55.907577400022149],[25.391386500000969,55.907930900022052],[25.391386500000969,55.907930900022052],[25.393676500001007,55.908543400022133],[25.393865600001018,55.9085915000221],[25.394048000001025,55.90862460002208],[25.394279200001062,55.908653700022107],[25.394279200001062,55.908653700022107],[25.394271900000984,55.908752400022081],[25.39426390000105,55.90884110002213],[25.394245100000994,55.908931300022154],[25.39421700000106,55.909020800022091],[25.39417620000108,55.909120500022091],[25.394132500001017,55.909260600022158],[25.394132500001017,55.909260600022158],[25.394103000001046,55.9093944000221],[25.\r\n394093600001064,55.909481600022126],[25.394090000001032,55.90956150002215],[25.394087700001027,55.90971980002211],[25.394106300001049,55.909917700022142],[25.394126000000981,55.910127200022124],[25.394126000000981,55.910127200022124],[25.394198400001049,55.910543800022182],[25.394382700001,55.911485100022155],[25.394382700001,55.911485100022155],[25.394431622875103,55.911714555192219],[25.394431622875121,55.911714555192255],[25.394439500001027,55.911751500022092],[25.394497700001025,55.912066700022116],[25.394541200001065,55.912313000022074],[25.394541200001065,55.912313000022074],[25.394562700001078,55.912437800022133],[25.394562700001078,55.912437800022133],[25.394699700001055,55.913247400022129],[25.394858900001047,55.914118700022094],[25.394858900001047,55.914118700022094],[25.394982600000983,55.914819000022163],[25.394982600000983,55.914819000022163],[25.395238900001051,55.916190800022136],[25.395238900001051,55.916190800022136],[25.395362700001019,55.916660800022107],[25.395362700001019,55.91666080002210\r\n7],[25.395500900001064,55.917185000022151],[25.395500900001064,55.917185000022151],[25.395511200001014,55.917227000022166],[25.395511200001014,55.917227000022166],[25.395598300001023,55.917582100022152],[25.395631100000998,55.917734200022117],[25.395631100000998,55.917734200022117],[25.395726600000987,55.918364600022144],[25.395726600000987,55.918364600022144],[25.395792000000984,55.9188322000221],[25.395792000000984,55.9188322000221],[25.395805300001033,55.918946400022143],[25.395805300001033,55.918946400022143],[25.39591800000105,55.919645900022068],[25.39591800000105,55.919645900022068],[25.39598060000106,55.92000470002214],[25.396008800001006,55.920111800022084],[25.396044800001054,55.920206500022132],[25.396088100001084,55.92029650002209],[25.396265500001,55.92058000002212],[25.399263200001041,55.924775200022111],[25.399354000001026,55.92490790002217],[25.399427100001013,55.925039400022136],[25.399476900001066,55.925143700022154],[25.399501300001031,55.925239200022155],[25.399507900001037,55.9253422000221\r\n29],[25.399496900001029,55.925443900022138],[25.399496900001029,55.925443900022138],[25.399479100001066,55.9255394000221],[25.399438900001037,55.925667400022157],[25.399341500001047,55.925921700022123],[25.399135600001078,55.926399200022111],[25.399043700001009,55.926550700022119],[25.398946200001053,55.926688400022151],[25.398853200001064,55.926806300022129],[25.398758000001017,55.926919200022162],[25.39818840000105,55.927433100022142],[25.398128800001064,55.927512100022184],[25.39806930000104,55.927596300022138],[25.397848600001055,55.928023200022082],[25.397743700001,55.9282206000222],[25.397446100001069,55.928720900022093],[25.397053300000998,55.929376100022118],[25.396889400001005,55.929626600022161],[25.396477500001044,55.930182400022161],[25.396401100001018,55.930295200022165],[25.396354600001,55.930392000022174],[25.396328100001021,55.930495000022155],[25.396312600000986,55.930581800022154],[25.396319200000992,55.930677300022147],[25.396334700001034,55.930755500022137],[25.39639670000102,55.93089190002\r\n2147],[25.396558800001024,55.931209700022123],[25.39662050000107,55.931342900022152],[25.397041100001037,55.932251700022121],[25.397041100001037,55.932251700022121],[25.39718060000105,55.932244300022127],[25.397477300001015,55.932246800022156],[25.398057500001027,55.932270300022147],[25.398245100001031,55.932268500022168],[25.398558000001049,55.932294400022208],[25.399201300000975,55.932375800022186],[25.399502500001066,55.932421000022181],[25.400122500001004,55.932537900022176],[25.400414700001026,55.932607700022167],[25.400709800001042,55.932658800022139],[25.401232800001043,55.932739900022177],[25.401505600001045,55.932804200022204],[25.401901400001037,55.932872200022125],[25.401901400001037,55.932872200022125],[25.406670300001075,55.933846000022122],[25.407087500001051,55.933959600022121],[25.407562600000997,55.934154300022144],[25.40797400000104,55.934319800022166],[25.408408600001035,55.934410700022156],[25.408901100001007,55.934430200022135],[25.409440000000995,55.934401000022142],[25.409781900001068,55\r\n.934339300022174],[25.410228100001003,55.934306900022172],[25.410598900001055,55.93431330002219],[25.41112040000105,55.934371800022149],[25.411902700001043,55.934537300022136],[25.412290900001075,55.934676900022112],[25.412673300001092,55.934881300022184],[25.413913400001025,55.935722000022189],[25.41429580000106,55.936059500022154],[25.414591300001089,55.9362575000222],[25.415715400001105,55.936812500022157],[25.416526700001075,55.93715650002212],[25.417436400001041,55.937679000022115],[25.421961900001083,55.940470000022195],[25.422500800001117,55.940742600022205],[25.423236700001056,55.940960100022181],[25.423236700001056,55.940960100022181],[25.426047000001077,55.941842700022193],[25.426690200001072,55.9419953000222],[25.430656500001064,55.942807900022189],[25.436442900001111,55.943914500022196],[25.438944400001049,55.944342900022193],[25.438944400001049,55.944342900022193],[25.4363248000011,55.947161400022154],[25.434903400001112,55.948743000022212],[25.434641700001109,55.949938300022154],[25.4346693000010\r\n94,55.952676000022187],[25.433892100001078,55.955015100022194],[25.433583500001056,55.9553330000222],[25.433423000001106,55.955459700022196],[25.433197900001126,55.955578100022223],[25.432918700001089,55.955672800022164],[25.428407900001083,55.956848600022191],[25.427474600001062,55.957048900022151],[25.423906200001049,55.958056900022129],[25.423906200001049,55.958056900022129],[25.42340780000108,55.958198300022239],[25.42340780000108,55.958198300022239],[25.422094500001066,55.958554200022192],[25.422094500001066,55.958554200022192],[25.417373800001098,55.95983350002215],[25.406772800001047,55.96269580002221],[25.406772800001047,55.96269580002221],[25.403801200001009,55.963675300022267],[25.403454200001072,55.963800200022163],[25.40317680000102,55.963927700022253],[25.402699100001044,55.964228300022164],[25.402699100001044,55.964228300022164],[25.399843000001049,55.966388600022242],[25.399843000001049,55.966388600022242],[25.399570300001052,55.96660480002226],[25.399570300001052,55.96660480002226],[25.39928910\r\n0001081,55.966827800022216],[25.399075300001062,55.96707520002218],[25.398916500001054,55.967321300022206],[25.397928000001073,55.970178900022212],[25.396916500001041,55.973230300022244],[25.396881900001034,55.973360700022226],[25.39689300000105,55.973466300022231],[25.39698750000105,55.973856000022252],[25.39698750000105,55.973856000022252],[25.396218000001074,55.973905600022263],[25.394626400001009,55.974005500022194],[25.393839300000995,55.974058900022257],[25.39302450000099,55.974126700022261],[25.392201800001036,55.974201300022216],[25.392201800001036,55.974201300022216],[25.389565600001056,55.977868500022254],[25.388963000001027,55.978523200022252],[25.388027430162079,55.979178653423915],[25.38802743016209,55.979178653423915],[25.386803400001039,55.980036200022219],[25.381893900001003,55.984575700022283],[25.37816140000098,55.987898400022253],[25.37816140000098,55.987898400022253],[25.376728900001009,55.989167400022232],[25.376728900001009,55.989167400022232],[25.37612060000097,55.989520400022307],[25.37\r\n5405700000972,55.989939400022244],[25.373008400001037,55.991470200022235],[25.372434300000943,55.991823300022233],[25.372004600001006,55.992057200022209],[25.371607100000997,55.992231900022318],[25.371126800001036,55.992446800022229],[25.370835500001018,55.992608000022244],[25.370578300000961,55.992772600022263],[25.370322100000998,55.992989700022306],[25.36972080000098,55.993552200022293],[25.369123300001004,55.994172400022293],[25.368717500001015,55.994740100022256],[25.368548300001038,55.995086700022249],[25.368463800000967,55.995373600022269],[25.368399500000976,55.996175300022252],[25.368383500000991,55.996296300022259],[25.368383500000991,55.996296300022259],[25.368342500000967,55.996388200022281],[25.368267400000988,55.996467900022324],[25.368176700001026,55.996537500022306],[25.368086600001032,55.9965806000223],[25.36795340000101,55.9966321000223],[25.367752800001035,55.996689300022233],[25.367239900000961,55.996805800022287],[25.366819600000987,55.99690280002222],[25.366432800000958,55.997003000022275\r\n],[25.366432800000958,55.997003000022275],[25.366040100001,55.997119100022267],[25.366040100001,55.997119100022267],[25.366468406154691,55.997495444505425]]}}]}";
            

            Assert.True(serializedRoute.ToLower() == originalRoute.Replace("\r\n", "").ToLower());

        }
    }
}
